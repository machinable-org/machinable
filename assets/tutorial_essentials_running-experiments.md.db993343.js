import{_ as o,o as p,c,a as s,b as e,d as a,w as t,e as l,r as i}from"./app.3008f39a.js";const v=JSON.parse('{"title":"Running experiments","description":"","frontmatter":{},"headers":[{"level":2,"title":"Executing experiments","slug":"executing-experiments","link":"#executing-experiments","children":[]},{"level":2,"title":"Reproducibility","slug":"reproducibility","link":"#reproducibility","children":[]},{"level":2,"title":"Execution implementations","slug":"execution-implementations","link":"#execution-implementations","children":[]}],"relativePath":"tutorial/essentials/running-experiments.md"}'),r={name:"tutorial/essentials/running-experiments.md"},F=s("h1",{id:"running-experiments",tabindex:"-1"},[e("Running experiments "),s("a",{class:"header-anchor",href:"#running-experiments","aria-hidden":"true"},"#")],-1),D=s("h2",{id:"executing-experiments",tabindex:"-1"},[e("Executing experiments "),s("a",{class:"header-anchor",href:"#executing-experiments","aria-hidden":"true"},"#")],-1),y=l(`<div class="language-python"><button class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">&gt;&gt;&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> machinable </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> Experiment</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;&gt;&gt;</span><span style="color:#A6ACCD;"> experiment </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Experiment</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">instance</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">estimate_gravity</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;&gt;&gt;</span><span style="color:#A6ACCD;"> experiment</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">execute</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">Assuming height of </span><span style="color:#F78C6C;">52</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">and</span><span style="color:#A6ACCD;"> time of </span><span style="color:#F78C6C;">0.3</span></span>
<span class="line"><span style="color:#A6ACCD;">The gravity on the exoplanet </span><span style="color:#89DDFF;">is</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">1155.5555555555557</span></span>
<span class="line"></span></code></pre></div><p>If the execution is successful, the experiment is marked as finished.</p><div class="language-python"><button class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">&gt;&gt;&gt;</span><span style="color:#A6ACCD;"> experiment</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">is_finished</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;">True</span></span>
<span class="line"></span></code></pre></div><h2 id="reproducibility" tabindex="-1">Reproducibility <a class="header-anchor" href="#reproducibility" aria-hidden="true">#</a></h2><p>By design, experiment instances can only be executed once. They are automatically assigned a unique experiment ID, a random seed, as well as a nickname for easy identification.</p><div class="language-python"><button class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">&gt;&gt;&gt;</span><span style="color:#A6ACCD;"> gravity </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Experiment</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">instance</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">estimate_gravity</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;&gt;&gt;</span><span style="color:#A6ACCD;"> gravity</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">experiment_id</span></span>
<span class="line"><span style="color:#89DDFF;">&#39;</span><span style="color:#676E95;">GDCN4d</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;&gt;&gt;</span><span style="color:#A6ACCD;"> gravity</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">nickname</span></span>
<span class="line"><span style="color:#89DDFF;">&#39;</span><span style="color:#676E95;">jet_oak</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;&gt;&gt;</span><span style="color:#A6ACCD;"> gravity</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">seed</span></span>
<span class="line"><span style="color:#F78C6C;">1632827863</span></span>
<span class="line"></span></code></pre></div><p>Repeated invocations of <code>execute()</code> after the initial execution, are simply ignored. On the other hand, if an execution failed, calling <code>execute()</code> will resume the execution with the same random seed.</p><p>To replicate or reproduce a experiment, create a new experiment instance with the same configuration. Learn more about <a href="./../elements-in-depth/experiments.html#derivation">continuing and repeating experiments</a>.</p><h2 id="execution-implementations" tabindex="-1">Execution implementations <a class="header-anchor" href="#execution-implementations" aria-hidden="true">#</a></h2>`,9),u=l(`<div class="language-python"><button class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#A6ACCD;">experiment</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">execute</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">machinable.execution.local</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">processes</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">})</span></span>
<span class="line"></span></code></pre></div>`,1),d=s("code",null,"machinable.execution.local",-1),m=l(`<p>machinable provides a number of alternative execution implementations out of the box.</p><p>For instance, execution using a queue system like <a href="https://slurm.schedmd.com/documentation.html" target="_blank" rel="noreferrer">Slurm</a> can be as simple as:</p><div class="language-python"><button class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#A6ACCD;">experiment</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">execute</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">machinable.execution.slurm</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><p>Delegating the execution to an external runner like <a href="https://www.open-mpi.org/" target="_blank" rel="noreferrer">MPI</a> may look like this:</p><div class="language-python"><button class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#A6ACCD;">experiment</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">execute</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">machinable.execution.external</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">runner</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">mpi</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">-n</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">})</span></span>
<span class="line"></span></code></pre></div><p>Check out the <a href="./../elements-in-depth/execution.html">execution guide</a> to learn more about available options. You may also be interested in implementing a <a href="./../elements-in-depth/execution.html">custom execution</a>.</p>`,6);function h(x,g,A,_,C,b){const n=i("Pydoc");return p(),c("div",null,[F,D,s("p",null,[e("Once implemented and configured, experiments can be executed by calling "),a(n,{caption:"execute()"},{default:t(()=>[e("machinable.Experiment.execute")]),_:1}),e(":")]),y,s("p",null,[e("Experiments can be executed in different ways. To configure the execution, "),a(n,{caption:"execute()"},{default:t(()=>[e("machinable.Experiment.execute")]),_:1}),e(" adopts the same module convention as "),a(n,null,{default:t(()=>[e("machinable.Experiment.instance")]),_:1}),e(". You can specify the execution implementation that you like to use by its module name and optionally provide configuration options in form of a dictionary:")]),u,s("p",null,[e("Just like in the case of experiments, this will instantiate a "),a(n,null,{default:t(()=>[e("machinable.Execution")]),_:1}),e(" class in the module "),d,e(" that will handle the execution; in the above example, the experiment will run isolated using multiprocessing.")]),m])}const E=o(r,[["render",h]]);export{v as __pageData,E as default};
